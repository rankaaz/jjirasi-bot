name: Daily Post - 진짜 마지막
on:
  schedule:
    - cron: '0 0 * * *'
  workflow_dispatch:

jobs:
  run:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - uses: actions/setup-python@v4
        with:
          python-version: '3.12'
          
      # Chrome 설치 (버전 안 지정하고 최신으로!)
      - name: Install Chrome
        run: |
          wget -q -O - https://dl.google.com/linux/linux_signing_key.pub | sudo apt-key add -
          echo "deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main" | sudo tee /etc/apt/sources.list.d/google-chrome.list
          sudo apt-get update
          sudo apt-get install -y google-chrome-stable
          
      # ChromeDriver 자동 설치 (최신 Chrome 버전에 맞춤)
      - name: Install ChromeDriver
        run: |
          sudo apt-get install -y chromium-chromedriver
          sudo ln -s /usr/lib/chromium-browser/chromedriver /usr/local/bin/chromedriver
          
      - run: pip install selenium
      
      - run: python bot2.py
      
      - uses: ncipollo/release-action@v1
        with:
          allowUpdates: true
          artifacts: "realtime_links.txt"
          tagName: latest
          token: ${{ secrets.GITHUB_TOKEN }}
